



<!-- 害獣位置情報入力 -->
<!-- 
ファイル名 beast_position_input.ejs
作成者 香月涼太,内藤壱成
概要 害獣の位置情報を入力するための入力画面
製作日 2023-1-12
変更日 2023-1-19

フロントの残り   登録内容確認でのマップ表示もしくは都道府県表示
                緯度と経度のvalue化
                確認画面formの中のselectを入力不可にする
-->
<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- モーダル -->
    <!-- https://coco-factory.jp/ugokuweb/move01/9-6-1/ -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>タイトル</title>
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/home.css' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/form-sample.css' rel='stylesheet' type='text/css'>
    
    <link rel='stylesheet' href='/stylesheets/register_vermin_info.css' />
    <link href='/stylesheets/modal.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css"
        href="https://coco-factory.jp/ugokuweb/wp-content/themes/ugokuweb/data/reset.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/Modaal/0.4.4/css/modaal.min.css">

    <!-- 技術班記述 -->
    <!-- <link rel='stylesheet' href='/stylesheets/register_vermin_info.css' /> -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
        crossorigin=""/>
    <link rel="stylesheet" href="/stylesheets/leaflet.usermarker.css" />
    <link rel="stylesheet" href="/stylesheets/L.Control.Zoomslider.css" />
    <link rel="stylesheet" href="/stylesheets/leaflet.awesome-markers.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />


        <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
    integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
    crossorigin=""></script>
    <script src="/javascripts/leaflet.usermarker.js"></script>
    <script src="/javascripts/L.Control.Zoomslider.js"></script>
    <script src="/javascripts/leaflet.awesome-markers.js"></script>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/javascripts/register_vermin_info.js"></script>
    <!-- 技術班記述 -->
</head>

<body onload="start()">
    <%- include("../sidebar_hunter.ejs") %>
    <main id="main">
        <div id="main-in">
            <div class="box">
                <h2>害獣位置情報入力</h2>
                
                    <!-- <input type="button" name="reset" id="reset" onclick="refresh()" value="位置リセット"> -->
                <form id="contant-form" class="form" name="contact-form">
                    <fieldset class="form__group">
                        <!-- <legend class="form__group-header">
                            <span class="form__group-label">位置情報<strong class="form__required-label">必須</strong></span>
                        </legend> -->
                        <p>位置情報 <strong class="form__required-label">必須</strong></p>
                        <div id="map"></div>
                    </fieldset>
                    <fieldset class="form__group">
                        <legend class="form__group-header">
                            <span class="form__group-label">害獣名<strong class="form__required-label">必須</strong></span>
                        </legend>
                        <div class="form__group-content">
                          <div class="form__select-box">
                            <div class="select-box">
                              <label class="visually-hidden" for="family-name-furigana">害獣名</label>
                              <select name="animal_options" id="animal_options" class="select-box__body">
                                <% for(let i in animals) { %>
                                    <% let obj = animals[i] %>
                                    <option value="<%= obj.id %>"><%= obj.wild_animal_name %></option>
                                <% } %>
                              </select><br>
                            </div>
                          </div>
                        </div>
                    </fieldset>
                    <fieldset class="form__group">
                        <legend class="form__group-header">
                            <span class="form__group-label">詳細</span>
                        </legend>
                        <div class="form__group-content">
                            <div class="form__name">
                                <div class="form__text-input">
                                  <textarea name="content" id="content" cols="30" rows="10"></textarea><br>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <button class="button child2 check-button" type="button" id="open">確認する</button>
                </form>
                    <!-- モーダル -->
                    <section id="info">
                        <h2>登録内容確認</h2>
                        <div class="content">
                          <p>この選択位置を送信しますか？</p>
                          <input type="hidden" name="latitude" value="" id="hidden-latitude">
                          <input type="hidden" name="longitude" value="" id="hidden-longitude">
                          <p class="select-latitude"></p>
                          <p class="select-longitude"></p>
                          <h2>選択された害獣名</h2>
                          <p id="selected-animal"></p>
                          <h2>詳細情報</h2>
                          <p id="input-content"></p>
                        </div>
                        <button type="submit" id="submit-button" disabled>送信</button>
                    </section>
            </div>
            <footer class="footer">
                <p>FOOTER KAKU</p>
                <p>〒000-0000 <br class="sp_block">石川県金沢市武蔵町16-10<br>TEL (076)260-6112　 FAX (076)256-0620<br>営業時間 /
                    10:00～19:30</p>
                <p class="copyright sp_none">COPYRIGHT © TOKYOZOUHOU CO.</p>
            </footer>
        </div><!-- /#main-in -->
    </main>
    <script type="text/javascript">
        (function ($) {
            $(function () {
                $('.sub-menu').on({
                    'mouseenter': function () {
                        $(this).addClass('is-active');
                    },
                    'mouseleave': function () {
                        $(this).removeClass('is-active');
                    }
                });
            });
        })(jQuery);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Modaal/0.4.4/js/modaal.min.js"></script>
    <script>
        $(".check-button").modaal({
            // start_open: flag, // ページロード時に表示するか
            content_source: '#info',
            overlay_close: true,//モーダル背景クリック時に閉じるか
            before_open: function () {// モーダルが開く前に行う動作
                $('html').css('overflow-y', 'hidden');/*縦スクロールバーを出さない*/
            },
            after_close: function () {// モーダルが閉じた後に行う動作
                $('html').css('overflow-y', 'scroll');/*縦スクロールバーを出す*/
            }
        });
    </script>
    
    <script>
      $("#content").change(function() {
            $("#input-content").text($("#content").val());
      });
      $("#animal_options").change(function() {
            $("#selected-animal").text($("#animal_options").find('option:selected').text());
      });
    </script>

</body>

<script src="/javascripts/register_vermin_info.js"></script>

</html>