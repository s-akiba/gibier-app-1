<!-- カート内一覧 -->
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title><%= title %></title>
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/test.css' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/cart.css' rel='stylesheet' type='text/css'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
</head>

<body>
    <%- include("../sidebar_purchaser.ejs") %>

    <main id="main">
        <div id="main-in">
            <div class="box">
                <div class="c-cart-modal__inner">
                    <div class="c-cart-modal__title">カート内一覧</div>
                    <div>
                        <% if (alert_message != 0) { %>
                            <% if (alert_message == 1) { %>
                                <div class="alert alert-success" role="alert">
                                    購入が完了しました。
                                </div>
                            <% } %>
                            <% if (alert_message == 2) { %>
                                <div class="alert alert-danger" role="alert">
                                    以下の商品の購入に失敗しました。
                                </div>
                            <% } %>
                        <% } %>
                        <% if (items == "") { %>
                            <p>カートの中身はありません</p>
                        <% } %>
                        <% var pur_info_id = [] %>
                        <div class="row row-cols-1 g-4">
                            <% for(var value of items){ %>
                                <div class="col">
                                    <div class="card" style="max-width: 500px;">
                                        <div class="row g-0">
                                            <div class="col-md-6 my-auto">
                                                <img src="/uploads/<%= value.image_link %>" style="object-fit: contain; width: 100%; height: 100%;">
                                            </div>
                                            <div class="col-md-6 text-center">
                                                <p>害獣名：<%= value.wild_animal_name%></p>
                                                <p>カテゴリ：<%= value.category_name %></p>
                                                <p>詳細：<%= value.detail %></p>
                                                <p>価格：<%= value.price %>円</p>
                                                <p>個数：<%= value.num_purchased %>個</p>
                                                <form action="/purchaser/delete_cart_list" method="post">
                                                    <input type="hidden" name="id" value="<%= value.id %>">
                                                    <button type="submit" class="btn btn-danger">削除</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% pur_info_id.push(value.id) %>
                            <% } %>
                        </div>
                    </div>
                    <% if (items != "") { %>
                        <a href="/purchaser/payment/?pur_info_id=<%= pur_info_id %>">
                            <button class="c-cart-modal__checkout js-cart-modal__checkout" type="button" >Check Out<span class="c-cart-modal__checkout_seq">/</span><span class="c-cart-modal__jp">決済する</span></button>
                        </a>
                    <% } %>
                </div>
            </div>
            <footer class="footer">
                <p>FOOTER KAKU</p>
                <p>〒000-0000 <br class="sp_block">石川県金沢市武蔵町16-10<br>TEL (076)260-6112　 FAX (076)256-0620<br>営業時間 /
                    10:00～19:30</p>
                <p class="copyright sp_none">COPYRIGHT © TOKYOZOUHOU CO.</p>
            </footer>
        </div>
    </main>
    <script type="text/javascript">
        (function ($) {
            $(function () {
                $('.sub-menu').on({
                    'mouseenter': function () {
                        $(this).addClass('is-active');
                    },
                    'mouseleave': function () {
                        $(this).removeClass('is-active');
                    }
                });
            });
        })(jQuery);
    </script>

</body>
</html>