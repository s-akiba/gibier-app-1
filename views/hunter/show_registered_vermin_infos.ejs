<!-- 登録害獣情報一覧画面 -->
<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="container">
            <div class="accordion" id="accordionExample">
                <% for(var i in vermin_infos) { %>
                    <% var obj = vermin_infos[i] %>
                    <% var created_at = new Date(obj.createdAt); %>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading-<%= obj.id %>">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-<%= obj.id %>" aria-expanded="true" aria-controls="collapse-<%= obj.id %>">
                                害獣名：<%= obj.wild_animal_info.wild_animal_name %> 　登録日：<%= created_at.getFullYear() %>年 <%= created_at.getMonth() +1 %>月<%= created_at.getDate() %>日 <%= created_at.getHours() %>時<%= created_at.getMinutes() %>分
                            </button>
                        </h2>
                        <div id="collapse-<%= obj.id %>" class="accordion-collapse collapse" aria-labelledby="heading-<%= obj.id %>" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <h4>地域</h4>
                                <p><%= obj.region.region_name %></p>
                                <h4>詳細</h4>
                                <p><%= obj.content %></p>
                                <!-- Button trigger modal -->
                                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#staticBackdrop-<%= obj.id %>">
                                    削除する
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="staticBackdrop-<%= obj.id %>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        削除しますか
                                    </div>
                                    <div class="modal-footer">
                                        <form action="/hunter/show_registered_vermin_infos" method="post">
                                            <input type="hidden" name="vermin_infos_id" value="<%= obj.id %>">
                                            <input type="submit" class="btn btn-danger" value="削除">
                                        </form>
                                    </div>
                            </div>
                        </div>
                    </div>
                <% } %>
            </div>
            <button onclick="history.back()" class="btn btn-secondary" type="button">戻る</button>

            <ul class="pagination justify-content-center mt-4">
                <li class="page-item">
                    <a href="/hunter/show_registered_vermin_infos/0" 
                        class="page-link">&lt;&lt; First</a>
                </li>
                <li class="page-item">
                    <a href="/hunter/show_registered_vermin_infos/<%= page - 1 %>" 
                        class="page-link">&lt; Prev</a>
                </li>
                <li class="page-item">
                    <a href="/hunter/show_registered_vermin_infos/<%= page + 1 %>" 
                        class="page-link">Next &gt;</a>
                </li>
                <li class="page-item">
                    <a href="/hunter/show_registered_vermin_infos/<%= Math.floor(count /pnum) %>" 
                        class="page-link">End &gt;&gt;</a>
            </ul>
        </div>
    </body>
</html>

