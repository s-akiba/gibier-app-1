<!-- ユーザー編集画面 -->
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>
        <%= title %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/style.css'/>
    <link rel='stylesheet' href='/stylesheets/form-sample.css'/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <link rel="stylesheet" href="/stylesheets/leaflet.usermarker.css"/>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/javascripts/leaflet.usermarker.js"></script>
</head>

<body class="container">
    <header>
        <h1 class="display-4">
            <%= title %>
        </h1>
    </header>
    <div role="main">
        <p><%- content %></p>
        <% if (alert_message !="" ) { %>
            <div class="alert alert-danger" role="alert">
                <%= alert_message %>
            </div>
            <% } %>
                <form method="post" action="/user/edit" class="form">
                    <input type="hidden" name="id" value="<%= form.id %>">
                    <!-- 名前 -->
                    <fieldset class="form-group">
                        <!-- <label for="name">名前</label> -->
                        <p class="form__group-header">
                            <span class="form__group-label">名前</span>
                        </p>
                            <input type="text" name="name" id="name" class="form__group-content form__name form__text-input text-input__body" value="<%= form.user_name %>">
                        <!-- </div> -->
                    </fieldset>
                    <!-- メール -->
                    <div class="form-group">
                        <p class="form__group-header">
                            <label class="form__group-label" for="email">EMAIL</label>
                        </p>
                        <!-- <label for="email">EMAIL</label> -->
                        <!-- <input type="email" name="email" id="email" class="form-control" value="<%= form.email %>"> -->
                        <input type="email" name="email" id="email" class="form__group-content form__text-input form__name text-input__body" value="<%= form.email %>">
                    </div><br>
                    <!-- パスワード -->
                    <!-- データがはいらん -->
                    <div class="form__group">
                        <p class="form__group-header">
                            <label class="form__group-label" for="postal-code">PASSWORD</label>
                        </p>
                        <div class="form__group-content">
                            <div class="form__postal-code">
                                <div class="form__text-input -narrow">
                                    <p class="text-input">
                                        <input id="pass" class="text-input__body" type="password" name="pass" value=""
                                            title="パスワードは半角大文字、小文字、英数字を一つずつ入れてください。">
                                        <input type="checkbox" onclick="myFunction()">Show Password
                                        <span class="text-input__validator"></span>
                                    </p>
                                </div>
                            </div>
                            <p class="form__validation" data-validation="postal-code" role="alert"
                                aria-live="assertive"></p>
                        </div>
                    </div>
                    <!-- 地域 -->
                    <div class="form__group">
                        <p class="form__group-header">
                            <label class="form__group-label" for="address-level1">地域</label>
                        </p>
                        <div class="form__group-content">
                            <div class="form__select-box">
                                <div class="select-box">
                                    <select name="region" id="region" class="select-box__body" name="address-level1">
                                        <% for(let i in regions) { %>
                                            <% let obj=regions[i] %>
                                                <option value="<%= obj.id %>" <% if (obj.id==form.region_id) { %>
                                                    selected<% } %>
                                                        ><%= obj.region_name %>
                                                </option>
                                                <% } %>
                                    </select>
                                </div>
                            </div>
                            <p class="form__validation" data-validation="address-level1" role="alert"
                                aria-live="assertive"></p>
                        </div>
                    </div>
                    <!-- 緯度 -->
                    <fieldset class="form__group">
                        <p class="form__group-header">
                            <span class="form__group-label">緯度</span>
                        </p>
                        <div class="form__group-content">
                            <div class="form__name">
                                <div class="form__text-input">
                                    <input class="text-input__body" type="text" name="latitude" id="latitude"
                                        value="<%= form.latitude %>">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <!-- 経度 -->
                    <fieldset class="form__group">
                        <p class="form__group-header">
                            <span class="form__group-label">経度</span>
                        </p>
                        <div class="form__group-content">
                            <div class="form__name">
                                <div class="form__text-input">
                                    <input class="text-input__body" type="text" name="longitude" id="longitude"
                                        value="<%= form.longitude %>">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <!-- 住所 -->
                    <div class="form__group">
                        <p class="form__group-header">
                            <label class="form__group-label" for="address-level2">住所</label>
                        </p>
                        <div class="form__group-content">
                            <div class="form__text-input -wide">
                                <div id="map"></div>
                            </div>
                            <div class="form__text-input -wide" style="padding-top: 10px;">
                                <input type="text" name="address" id="address" class="text-input__body"
                                    value="<%= form.address %>">
                            </div>
                            <p class="form__validation" data-validation="address-level2" role="alert"
                                aria-live="assertive"></p>
                        </div>
                    </div>
                    <!-- 一言 -->
                    <div class="form__group">
                        <p class="form__group-header">
                            <label class="form__group-label" for="message">一言</label>
                        </p>
                        <div class="form__group-content">
                            <div class="form__textarea">
                                <div class="textarea js-flexible-textarea">
                                    <textarea id="bio" class="textarea__body" name="bio"><%= form.bio %></textarea>
                                </div>
                            </div>
                            <p class="form__validation" data-validation="message" role="alert" aria-live="assertive">
                            </p>
                        </div>
                    </div>
                    <!-- ボタン -->
                    <div style="position: absolute;">
                        <div style="float:left">
                            <button onclick="history.back()" class="button" type="button">戻る</button>
                        </div>
                        <div style="float:right; text-align: center; right:0">
                            <input type="submit" value="更新" class="button" style="background-color: #0D6EFD;">
                        </div>
                    </div>
                </form>
    </div>
    <script type="text/javascript">
        function myFunction() {
            var x = document.getElementById("pass");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
    </script>
    <script src="/javascripts/user-edit.js"></script>
</body>

</html>
<!-- bk -->
<!-- <div class="form-group">
    <label for="name">名前</label>
    <input type="text" name="name" id="name" 
        class="form-control" value="< = form.user_name %>">
</div>
<div class="form-group">
    <label for="email">EMAIL</label>
    <input type="email" name="email" id="email" 
        class="form-control" value="< = form.email %>">
</div>
<div class="form-group">
    <label for="pass">PASSWORD</label>
    <input type="password" name="pass" id="pass" 
        class="form-control" value="" placeholder="パスワードを変更する場合は入力">
    <input type="checkbox" onclick="myFunction()">Show Password
</div>
<div class="form-group">
    <label for="region">地域</label>
    <select name="region" id="region">
        <  for(let i in regions) { %>
            <  let obj = regions[i] %>
            <option value="< = obj.id %>" <  if (obj.id == form.region_id) { %>selected<  } %>>< = obj.region_name %></option>
        <  } %>
    </select>
</div>
<div class="form-group">
    <label for="latitude">緯度</label>
    <input type="text" name="latitude" id="latitude" value="< = form.latitude %>" class="form-control">
</div>
<div class="form-group">
    <label for="longitude">緯度</label>
    <input type="text" name="longitude" id="longitude" value="< = form.longitude %>" class="form-control">
</div>
<div id="map"></div>
<div class="form-group">
    <label for="address">住所</label>
    <input type="text" name="address" id="address" 
        class="form-control" value="< = form.address %>">
</div>
<div class="form-group">
    <label for="bio">ひとこと</label>
    <textarea name="bio" id="bio" cols="20" rows="10" class="form-control" >< = form.bio %></textarea>
</div>
<div class="row m-5">
    <div class="col-6">
        <button onclick="history.back()" class="btn btn-secondary" type="button">戻る</button>
    </div>
    <div class="col-6 text-end">
        <input type="submit" value="更新" class="btn btn-primary">
    </div>
</div> -->