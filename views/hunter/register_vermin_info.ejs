<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>

    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/register_vermin_info.css' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
      integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
      crossorigin=""/>
    <link rel="stylesheet" href="/stylesheets/leaflet.usermarker.css" />
    <link rel="stylesheet" href="/stylesheets/L.Control.Zoomslider.css" />
    <link rel="stylesheet" href="/stylesheets/leaflet.awesome-markers.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->


      <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
    integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
    crossorigin=""></script>
    <script src="/javascripts/leaflet.usermarker.js"></script>
    <script src="/javascripts/L.Control.Zoomslider.js"></script>
    <script src="/javascripts/leaflet.awesome-markers.js"></script>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
            <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
            integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
            crossorigin=""></script> -->

  </head>

  <body onload="start()">
    <div id="map"></div>
    <!-- <input type="button" name="reset" id="reset" onclick="refresh()" value="位置リセット"> -->

    <form action="/hunter/register_vermin_info" method="POST">
      <p>現在の選択位置</p>
      <p class="select-latitude"></p>
      <p class="select-longitude"></p>
      <label for="content">詳細情報入力</label><br>
      <textarea name="content" id="content" cols="30" rows="10"></textarea><br>
      <label for="animal_options">害獣名選択</label>
      <select name="animal_options" id="animal_options">
          <% for(let i in animals) { %>
              <% let obj = animals[i] %>
              <option value="<%= obj.id %>"><%= obj.wild_animal_name %></option>
          <% } %>
      </select><br>
    
      <button type="button" id="open" onclick="openModal" disabled >
          確認する
      </button>
      <div class="container" id="a"></div>
      <button id="a-button">ajax</button>
    
    
      <!-- Modal -->
      <div class="modal" id="b">
          <div class="header">
            <a href="#" class="cancel">X</a>
          </div>
          <div class="content">
            <p>この選択位置を送信しますか？</p>
            <input type="hidden" name="latitude" value="" id="hidden-latitude">
            <input type="hidden" name="longitude" value="" id="hidden-longitude">
            <p class="select-latitude"></p>
            <p class="select-longitude"></p>
            <h2>選択された害獣名</h2>
            <p id="selected-animal"></p>
            <h2>詳細情報</h2>
            <p id="input-content"></p>
          </div>
          <div class="footer">
              <button type="submit">送信</button>
          </div>
          
      </div>
    </form>

    <script src="/javascripts/register_vermin_info.js"></script>
    <script>
      $("#content").change(function() {
            $("#input-content").text($("#content").val());
      });
      $("#animal_options").change(function() {
            $("#selected-animal").text($("#animal_options").find('option:selected').text());
      });
    </script>

  </body>
</html>
